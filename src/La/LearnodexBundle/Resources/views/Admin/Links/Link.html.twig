{% extends "LaLearnodexBundle::Admin/Admin.html.twig" %}

{% block card_content %}
    {% if downLinks is not empty %}
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Children</h3>
            </div>
            <div class="panel-body">
                <ul class="nav nav-pills">
                    {% for link in downLinks %}
                        {% set child = link.getChild() %}
                        <li>
                            <a href="{{ path('card_link',{'id':child.id}) }}">
                                <span class="badge pull-right">{{ link.weight }}</span>
                                {{ child.name }}
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    {% endif %}

    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">Add children</h3>
        </div>
        <div class="panel-body">
            {% for childEntity in allLearningEntities %}
                {% if childEntity.id != card.getId() %}
                    <form class="form-inline" method="post" action="{{ path('add_child',{'parentId':card.getId(),'childId':childEntity.id}) }}">
                        <div class="form-group">
                            {% set elementId = 'child-weight-' ~ childEntity.id %}
                            <label for="{{ elementId }}">{{ childEntity.name }}</label>
                            <input type="number" class="form-control" name="weight" value="5" id="{{ elementId }}" />
                        </div>
                        <button type="submit" class="btn btn-default">Add as child</button>
                    </form>
                {% endif %}
            {% endfor %}
        </div>
    </div>

    {% if upLinks is not empty %}
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Parents</h3>
            </div>
            <div class="panel-body">
                <ul class="nav nav-pills">
                    {% for link in upLinks %}
                        {% set parent = link.getParent() %}
                        <li>
                            <a href="{{ path('card_link',{'id':parent.id}) }}">
                                <span class="badge pull-right">{{ link.weight }}</span>
                                {{ parent.name }}
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    {% endif %}
{% endblock %}
