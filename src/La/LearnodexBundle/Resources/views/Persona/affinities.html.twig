{% extends "LaLearnodexBundle::layout.html.twig" %}

{% block Main %}

    <h1>Define the affinities for {{ persona.getUser().getUserName() }}</h1>

    <form action="{{ path('persona_affinity', {'id':persona.id}) }}" method="post">
        <div class="col-xs-12">

            <div class="row">
                <div class="col-xs-4 text-right">
                    Current affinities:
                </div>
                <div class="col-xs-4">
                    {% if affinities is empty %}
                        no affinities for this persona
                    {% endif %}
                </div>
            </div>
            {% for affinity in affinities %}
                <div class="row">
                    <div class="col-xs-4 text-right">
                        {{ affinity.getAgora().getName() }}
                    </div>
                    <div class="col-xs-4">
                        <input type="text" name="agora_{{ affinity.getAgora().getId() }}" value="{{ affinity.value }}" />%
                    </div>
                    <div class="col-xs-2">
                        <a class="badge" href="{{ path('persona_remove_affinity',{'personaId':persona.id,'id': affinity.id}) }}">remove affinity</a>
                    </div>
                </div>
            {% endfor %}

            <hr>

            <div class="row">
                <div class="col-xs-4 text-right">
                    Agoras with no affinity:
                </div>
                <div class="col-xs-4">
                </div>
            </div>
            {% for agora in agoras %}
            <div class="row">
                <div class="col-xs-4 text-right">
                    {{ agora.getName() }}
                </div>
                <div class="col-xs-4">
                    <input type="text" name="agora_{{ agora.id }}" value="0" />%
                </div>
            </div>
            {% endfor %}

            <hr>

            <div class="row">
                <div class="col-xs-4 text-right">
                    &nbsp;
                </div>
                <div class="col-xs-4">
                    <input type="submit" value="Save affinities" />
                </div>
            </div>
        </div>
    </form>
    <hr>
    <a class="badge" href="{{ path('persona_edit',{'id':persona.id}) }}">edit persona</a>
    <a class="badge" href="{{ path('persona_homepage') }}">back to the overview</a>
{% endblock %}
